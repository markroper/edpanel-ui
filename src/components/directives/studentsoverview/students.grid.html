<div class="students-grid">
	<section layout="row" layout-align="center start">
    <!-- THE FILTER SIDEBAR -->
    <div flex="none" class="facet-container" layout layout-align="center start" layout-wrap ng-show="showFilters">
      <h3 flex="100" class="md-headline filters-title">Student List Filters</h3>
      <md-input-container>
        <label>Add filter</label>
        <md-select ng-model="filter" md-on-close="addFilter()">
          <md-option ng-repeat="filter in filters" value="{{filter}}">
            {{filter}}
          </md-option>
        </md-select>
      </md-input-container>
      <filter-chip ng-repeat="(type, filter) in currentFilters"
                   filter="filter"
                   remove-filter="removeFilter"
                   filter-added="filterAdded"></filter-chip>
    </div>
		<!-- THE MAIN STUDENT LIST BODY, INLUDING SEARCH BOX -->
    <div flex="grow"class="table-container">
      <div ng-show="showFilter">
        <div layout="row" layout-align="center center">
          <md-button class="md-fab md-mini md-primary" ng-click="toggleFilters()">
            <md-icon>filter_list</md-icon>
            <md-tooltip>show/hide filters</md-tooltip>
          </md-button>
          <md-card>
            <md-input-container md-no-float>
              <input class="search-name" ng-model="search.name" placeholder="Search students by name" tabindex="1">
            </md-input-container>
          </md-card>
        </div>
      </div>
      <div style="padding-left:20%; padding-right:20%;" layout="column" layout-align="center center" ng-show="!studentsData">
        <h3 flex="50">Loading...</h3>
        <br/>
        <md-progress-linear md-mode="indeterminate" flex="50"></md-progress-linear>
      </div>
			<div hide-sm layout="row" style="font-size: 16px; width:100%;" ng-show="studentsData">
				<div flex="{{::cellWidth}}" class="table-cell" ng-show="showFilter"></div>
				<div flex="{{::cellWidth}}" class="table-cell list-filter no-select" ng-click="setOrder($event, 'behavior')">
          Behavior
          <md-icon md-font-set="material-icons" class="material-icons sort-icon">keyboard_arrow_up</md-icon>
        </div>
				<div flex="{{::cellWidth}}" class="table-cell list-filter no-select" ng-click="setOrder($event, 'homework')">
          HW Completion
          <md-icon md-font-set="material-icons" class="material-icons sort-icon">keyboard_arrow_up</md-icon>
        </div>
				<div flex="{{::cellWidth}}" class="table-cell list-filter no-select" ng-click="setOrder($event, 'attendance')">
          Attendance
          <md-icon md-font-set="material-icons" class="material-icons sort-icon">keyboard_arrow_up</md-icon>
        </div>
				<div flex="{{::cellWidth}}" class="table-cell list-filter no-select" ng-click="setOrder($event, 'gpa')">
          GPA
          <md-icon md-font-set="material-icons" class="material-icons sort-icon">keyboard_arrow_up</md-icon>
        </div>
			</div>
      <div class="table-row" layout="row" layout-wrap ng-repeat="student in studentsData | orderBy:order | filter:search:strict | limitTo: limit track by student.id">
        <div class="table-cell" flex="{{::cellWidth}}" flex-sm="100" ng-show="showFilter">
          <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
            <md-button md-no-ink class="md-primary student-name" ng-click="goToStudent(student)">
            {{::student.name}}
            <md-tooltip>Click for student dashboard</md-tooltip>
          </md-button>
          </section>
        </div>
        <div class="table-cell" flex="{{::cellWidth}}" flex-sm="50" ng-click="showBehaviorTray($event, student)">
          <div class="choropleth band-{{::student.behaviorClass}}" layout="row" layout-align="center center">
            <span class="mobile-label md-subhead" hide-gt-sm>Behavior</span>
            <div class="toggle-icon-wrapper" layout="column" layout-align="center center">
              <md-icon md-font-set="material-icons" class="material-icons md-48 arrow-icon"> keyboard_arrow_down </md-icon>
            </div>
            <md-tooltip>{{::student.behaviorPeriod || 'period'}}'s prep score: {{::student.behavior || 90}}</md-tooltip>
          </div>
        </div>
        <div class="table-cell" flex="{{::cellWidth}}" flex-sm="50" ng-click="showHomeworkTray($event, student)">
          <div class="choropleth band-{{::student.homeworkClass}}" layout="row" layout-align="center center">
            <span class="mobile-label md-subhead" hide-gt-sm>Homework</span>
            <div class="toggle-icon-wrapper" layout="column" layout-align="center center">
              <md-icon md-font-set="material-icons" class="material-icons md-48 arrow-icon"> keyboard_arrow_down </md-icon>
            </div>
            <md-tooltip>{{::student.homework || 0}}% annual completion</md-tooltip>
          </div>
        </div>
        <div class="table-cell" flex="{{::cellWidth}}" flex-sm="50" ng-click="showAttendanceTray($event, student)">
          <div class="choropleth band-{{::student.attendanceClass}}" layout="row" layout-align="center center">
            <span class="mobile-label md-subhead" hide-gt-sm>Attendance</span>
            <div class="toggle-icon-wrapper" layout="column" layout-align="center center">
              <md-icon md-font-set="material-icons" class="material-icons md-48 arrow-icon"> keyboard_arrow_down </md-icon>
            </div>
            <md-tooltip>{{::student.attendance || 0}} absenses this {{::student.attendancePeriod || 'period'}}</md-tooltip>
          </div>
        </div>
        <div class="table-cell" flex="{{::cellWidth}}" flex-sm="50" ng-click="showGpaTray($event, student)">
          <div class="choropleth band-{{::student.gpaClass}}" layout="row" layout-align="center center">
            <span class="mobile-label md-subhead" hide-gt-sm>GPA</span>
            <div class="toggle-icon-wrapper" layout="column" layout-align="center center">
              <md-icon md-font-set="material-icons" class="material-icons md-48 arrow-icon"> keyboard_arrow_down </md-icon>
            </div>
            <md-tooltip>Current GPA: {{::student.gpa || '-'}}</md-tooltip>
          </div>
        </div>
      </div>
      <md-button md-no-ink class="md-primary" ng-click="increaseLimit()" ng-show="showMoreStudents && studentsData && limit < studentsData.length" style="margin:10px 0px;">More students</md-button>
    </div>
	</section>
</div>
